<% content_for :head do %>
  <script type="module">
    import 'https://cdn.skypack.dev/vanilla-colorful';
    import 'https://cdn.skypack.dev/vanilla-colorful/hex-input.js';

      const pickers = document.querySelectorAll('hex-color-picker');
      const inputs = document.querySelectorAll('hex-input');

      pickers.forEach(p => {
        p.addEventListener('color-changed', (event) => {
          p.previousElementSibling.value = event.detail.value
          p.nextElementSibling.color = event.detail.value
          p.color = event.detail.value;
          p.value = event.detail.value
        });

        p.nextElementSibling.addEventListener('color-changed', event => {
          p.color = event.detail.value
        })
      })
  </script>
<% end %>

<%= render "form" %>
